<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.itwill.spring2.repository.BookmarkRepository">

    <!-- 게시글 북마크 등록 -->
    <insert id="BookmarkOn">
        insert into BOOKMARK (bookmark_id, post_id, user_id)
        values (BOOKMARK_seq.nextval, #{post_id}, #{user_id})
    </insert>
    
    <!-- 게시글 북마크 상태 -->
    <select id="MyBookmark" resultType="com.itwill.spring2.dto.PostListDto">
        select count(*) from BOOKMARK 
        where post_id = #{post_id} and user_id = #{user_id}
    </select> 
    
    <!-- 게시글 북마크 취소 -->
    <delete id="BookmarkOff">
        delete from BOOKMARK 
        where post_id = #{post_id} and user_id = #{user_id}
    </delete>
</mapper>